UPGC:
	Inherits: ^BuildingTD
	Inherits: ^TechLevelBuilding
	Inherits: ^Tier4Tech
	Inherits: ^DisableOnLowPowerOrForceDisabled
	Inherits: ^3x2Building+Bib
	HitShape:
		TargetableOffsets: -355,-1024,0
	Building:
		Footprint: xxx xxx ===
		LocalCenterOffset: 0,-1024,0
	Health:
		HP: 80000
	RevealsShroud:
		MinRange: 4c0
		Range: 5c0
		RevealGeneratedShroud: False
	RevealsShroud@GAPGEN:
		Range: 4c0
	WithSpriteBody:
		PauseOnCondition: disabled || being-warped
	Buildable:
		Queue: Building
		BuildPaletteOrder: 200
		Prerequisites: ~structures.gdi, gtek
		Description: Allows the construction of advanced weaponry and upgrades.\n  Maximum 1 can be built.\n  Cannot be captured.
		BuildLimit: 1
		IconPalette: chrometd
	-Capturable:
	-CaptureNotification:
	-CapturableProgressBar:
	-CapturableProgressBlink:
	-CaptureManager:
	Valued:
		Cost: 2500
	Tooltip:
		Name: Upgrade Center
	ValidFactions:
		Factions: talon, zocom, eagle
	ProvidesPrerequisiteValidatedFaction@talonupgc:
		Factions: talon
		Prerequisite: upgc.talon
	ProvidesPrerequisiteValidatedFaction@zocomupgc:
		Factions: zocom
		Prerequisite: upgc.zocom
	ProvidesPrerequisiteValidatedFaction@eagleupgc:
		Factions: eagle
		Prerequisite: upgc.eagle
	ProvidesPrerequisite@Name:
	ProvidesDelayedPrerequisite@UPGRADE1:
		Prerequisite: miss.gdi
		Delay: 3
		Notification: UnitArmorUpgraded
		RequiresCondition: !disabled && !empdisable && !being-warped
	Power:
		Amount: -150
		RequiresCondition: !being-warped
	Targetable:
		TargetTypes: Ground, Structure, C4, DetonateAttack
	WithDeathAnimation:
		DeathSequence: dead
		UseDeathTypeSuffix: false
		DeathSequencePalette: overlayplayertd
	Sellable:
		RequiresCondition: !build-incomplete && !c4 && !being-warped
	ProductionAirdropCA:
		Produces: Money
		PauseOnCondition: forceshield || invulnerability || being-warped
		ActorType: ocar.reinforce
		BaselineSpawn: true
		IncomingAudio: SuppliesInbound
	WithDeliveryOverlay:
		Sequence: flare
		Palette: effect
		IsPlayerPalette: false
		Offset: -1024,768,0
	ProduceActorPowerCA@SUPPLYDROP:
		PauseOnCondition: disabled || empdisable || being-warped
		Prerequisites:
			1: dropzone.strat
		IconImage: upgc.drop
		Names:
			1: Supply Drop
		Descriptions:
			1: Dispatches a convoy that delivers additional credits to your HQ.
		Icons:
			1: icon
		IconPalette: chrometd
		Actors: truk
		Type: Money
		ChargeInterval: 1000
		OrderName: supplydrop
		ReadyAudio: SuppliesInbound
		BlockedAudio: OnHold
		DisplayTimerRelationships: Ally
	Exit:
		SpawnOffset: 511,511,0
		ExitCell: 1,1
	Turreted:
		TurnSpeed: 12
		InitialFacing: 384
		RealignDelay: -1
		Offset: -768,468,0
	Armament@ROCKET:
		Name: firestorm
		RequiresCondition: tower.rocket
		Weapon: FirestormBarrage
		LocalOffset: 768,64,368, 768,-64,368, 768,64,255, 768,-64,255
	SupportPowerChargeBar:
	RejectsOrders:
		Except: Sell, PowerDown
	AmmoPool:
		Ammo: 3
		ReloadCount: 3
		AmmoCondition: loaded-rocket
	ReloadAmmoPool:
		Delay: 100
		Count: 3
	WithSpriteTurret@ROCKET:
		RequiresCondition: !build-incomplete && tower.rocket
		Recoils: false
		Sequence: turret-rocket
	AttackTurreted:
		Armaments: firestorm
		RequiresCondition: !build-incomplete && tower.rocket && loaded-rocket > 0
		PauseOnCondition: disabled || empdisable || being-warped
	WithIdleOverlay@RADAR:
		RequiresCondition: !build-incomplete && tower.radar
		Sequence: turret-radar
		Offset: 0, 350, 0
		PauseOnCondition: !scan-active || disabled || being-warped
	WithIdleOverlay@SHIELD:
		RequiresCondition: !build-incomplete && tower.shield && !nshield-active
		Sequence: turret-shield
		Offset: 0, 350, 0
		PauseOnCondition: disabled || being-warped
	WithIdleOverlay@SHIELD-ACTIVE:
		RequiresCondition: !build-incomplete && tower.shield && nshield-active
		Sequence: turret-shield-active
		Offset: 0, 350, 0
		PauseOnCondition: disabled || being-warped
	WithIdleOverlay@SHIELD-ACTIVE-EFFECT:
		RequiresCondition: !build-incomplete && tower.shield && nshield-active
		Sequence: emp-overlay
		Palette: tseffect
		Offset: -1284,350,0
		PauseOnCondition: disabled || being-warped
	WithIdleOverlay@DZONE:
		RequiresCondition: !build-incomplete && tower.drop
		Sequence: turret-drop
		Offset: 0, 350, 0
		PauseOnCondition: disabled || being-warped
	AttackOrderPower@FIRESTORM:
		OrderName: firestormbarrage
		Prerequisites:
			1: bombard.strat
		IconImage: upgc.bomb
		Icons:
			1: icon
		IconPalette: chrometd
		Cursor: ability
		ChargeInterval: 6000
		Names:
			1: Firestorm Missile Barrage
		Descriptions:
			1: Unleash a wave of napalm missiles that saturate a medium target area.
		RequiresCondition: !build-incomplete && tower.rocket
		PauseOnCondition: disabled || empdisable || being-warped
		SelectTargetSpeechNotification: SelectTarget
		InsufficientPowerSpeechNotification: InsufficientPower
		DisplayRadarPing: True
	GrantExternalConditionPowerCA@NANOSHIELD:
		OrderName: nanoshield
		Prerequisites:
			1: hold.strat
		IconImage: upgc.hold
		Icons:
			1: icon
		IconPalette: chrometd
		ChargeInterval: 5250
		Weapon: NanoshieldPulse
		Names:
			1: Nanoshield Generator
		Descriptions:
			1: Deploys nanites that rapidly repair and shield allied units in the target area.
		Condition: nshield
		Dimensions: 5, 5
		Footprint: _xxx_ xxxxx xxxxx xxxxx _xxx_
		ValidRelationships: Ally
		Duration: 500
		ActivationDelay: 0
		AllowMultiple: false
		RequiresCondition: !build-incomplete && tower.shield
		PauseOnCondition: disabled || empdisable || being-warped
		SelectTargetSpeechNotification: SelectTarget
		InsufficientPowerSpeechNotification: InsufficientPower
		DisplayRadarPing: True
		Cursor: ability
		DisplayTimerRelationships: Ally
	GrantPrerequisiteChargeDrainPowerCA@RADAR:
		OrderName: advradarorder
		DischargeModifier: 1200
		Prerequisite: scan-active
		ChargeInterval: 3000
		IconImage: upgc.seek
		Icons:
			1: icon
		IconPalette: chrometd
		Names:
			1: Advanced Radar Scan
		Descriptions:
			1: Provides information on enemy structures & units positions.
		RequiresCondition: !build-incomplete && tower.radar
		PauseOnCondition: !tower.radar || disabled || being-warped
		LaunchSound: gradarup.aud
		BeginChargeSound: gradardn.aud
		DisplayTimerRelationships: Ally
		SelectTargetSpeechNotification: SelectTarget
		InsufficientPowerSpeechNotification: InsufficientPower
		Prerequisites:
			1: scan-active
	DrainPrerequisitePowerOnDamage@RADAR:
		OrderName: advradarorder
	GrantConditionOnPrerequisite@SCAN:
		Prerequisites: scan-active
		Condition: scan-active
	GrantConditionOnBotOwner@RADAR:
		Condition: scan-active
		Bots: brutal, vhard, hard, normal, easy, naval
	GrantConditionOnPrerequisite@RADAR:
		Prerequisites: radar-active
		Condition: radar-active
	GpsRadarProvider:
		RequiresCondition: tower.radar && scan-active && !(disabled || being-warped)
	ExternalCondition@NSACTIVE:
		Condition: nshield-active
	ExternalCondition@NSAUDIO:
		Condition: nshield-audio
	ProximityExternalCondition@NSHIELD-AUDIO:
		Condition: nshield-audio
		RequiresCondition: nshield-active
		AffectsParent: true
		EnableSound: uscolo1.aud
	AmbientSound@NSHIELD-AUDIO:
		SoundFiles: uscolo2a.aud, uscolo2b.aud, uscolo2c.aud
		Delay: 3
		Interval: 0
		RequiresCondition: nshield-audio || nshield-active
	Pluggable:
		Conditions:
			tower.rocket: tower.rocket
			tower.radar: tower.radar
			tower.shield: tower.shield
			tower.drop: tower.drop
		Requirements:
			tower.rocket: !build-incomplete && !tower.radar && !tower.rocket && !tower.shield && !tower.drop
			tower.radar: !build-incomplete && !tower.radar && !tower.rocket && !tower.shield && !tower.drop
			tower.shield: !build-incomplete && !tower.radar && !tower.rocket && !tower.shield && !tower.drop
			tower.drop: !build-incomplete && !tower.radar && !tower.rocket && !tower.shield && !tower.drop
	ProvidesPrerequisite@pluggable:
		RequiresCondition: !build-incomplete && (tower.rocket || tower.radar || tower.shield || tower.drop)
		Prerequisite: upgc.plugged
	ProvidesPrerequisite@SCANACTIVE:
		RequiresCondition: !build-incomplete && tower.radar
		Prerequisite: scan-active
	ProvidesPrerequisite@AMPDROP:
		RequiresCondition: !build-incomplete && tower.drop
		Prerequisite: dropzone.strat
	ProvidesPrerequisite@upgb:
		Prerequisite: bombard.strat
		RequiresCondition: tower.rocket
	ProvidesPrerequisite@upgs:
		Prerequisite: seek.strat
		RequiresCondition: tower.radar
	ProvidesPrerequisite@upgh:
		Prerequisite: hold.strat
		RequiresCondition: tower.shield
	WithAmmoPipsDecoration:
		Position: BottomLeft
		RequiresSelection: true
	WithAmmoPipsDecoration:
		Position: BottomLeft
		RequiresSelection: true

UPGC.SOCK:
	AlwaysVisible:
	Interactable:
	Tooltip:
		Name: Component Platform

UPGC.BOMB:
	Inherits: ^BuildingPlugTD
	Valued:
		Cost: 1500
	Tooltip:
		Name: Upgrade: Firestorm Missile System
	Buildable:
		Queue: Defense
		BuildPaletteOrder: 1
		Prerequisites: ~upgc, !upgc.plugged
		Description: Provides an napalm rocket barrage power.\n\nUnits get a firepower bonus of 15%.
		IconPalette: chrometd
	Plug:
		Type: tower.rocket
	Power:
		Amount: -100

UPGC.SEEK:
	Inherits: ^BuildingPlugTD
	Valued:
		Cost: 1500
	Tooltip:
		Name: Upgrade: Advanced Radar System
	Buildable:
		Queue: Defense
		BuildPaletteOrder: 2
		Prerequisites: ~upgc, !upgc.plugged
		Description: Provides detailed information on enemy locations.\n\nUnits get a range and speed bonus of 15%.
		IconPalette: chrometd
	Plug:
		Type: tower.radar
	Power:
		Amount: -100

UPGC.HOLD:
	Inherits: ^BuildingPlugTD
	Valued:
		Cost: 1500
	Tooltip:
		Name: Upgrade: Nanoshield Generator
	Buildable:
		Queue: Defense
		BuildPaletteOrder: 3
		Prerequisites: ~upgc, !upgc.plugged
		Description: Provides the ability to rapidly repair friendly structures.\n\nUnits get an armor bonus of 15%.
		IconPalette: chrometd
	Plug:
		Type: tower.shield
	Power:
		Amount: -100

UPGC.DROP:
	Inherits: ^BuildingPlugTD
	Valued:
		Cost: 1500
	Tooltip:
		Name: Upgrade: Supply Drop Zone
	Buildable:
		Queue: Defense
		BuildPaletteOrder: 4
		Prerequisites: ~upgc, ~!upgc.plugged
		Description: Provides a dropzone for emergency supplies\nYou will receive an universal basic income.
		IconPalette: chrometd
	Plug:
		Type: tower.drop
	Power:
		Amount: -50

Ion_Defense:
	Inherits: ^Defense
	Inherits: ^TSSprite
	Inherits: ^HighResShadow
	Inherits: ^AutoTargetGround
	Inherits: ^DisableOnLowPowerOrPowerDown
	Inherits: ^2x2Building
	Buildable:
		Queue: Defense
		BuildPaletteOrder: 100
		Prerequisites: hq, ~structures.zocom
		Description: Ion base defense.\n  Requires power to operate.\n  Can detect cloaked units.\n
	TooltipExtras:
		Strengths: . Strong vs Infantry, Light Vehicles
		Weaknesses: . Weak vs Aircraft, Artillery
		Attributes: . Deals area of effect damage
	Valued:
		Cost: 2000
	Tooltip:
		Name: Ion Defense
	Health:
		HP: 110000
	Turreted:
		TurnSpeed: 8
		InitialFacing: 0
		RealignDelay: -1
	WithSpriteBody:
		Sequence: base
	WithEmbeddedTurretSpriteBody:
		PauseOnCondition: disabled || empdisable || being-warped
	-WithMakeAnimation:
	AttackTurreted:
		PauseOnCondition: disabled || empdisable || being-warped
	Armament:
		Weapon: IonZap.Defense
		FireDelay: 2
		MuzzleSequence: muzzle
		LocalOffset: 1000,0,80
	WithMuzzleOverlay:
	Power:
		Amount: -150
		RequiresCondition: !being-warped
	FireWarheadsOnDeathCA:
		Weapon: BuildingExplode
		EmptyWeapon: BuildingExplode
	DetectCloaked:
		RequiresCondition: !(disabled || empdisable || being-warped)

STWR:
	Inherits: ^Defense
	Inherits: ^DisableOnLowPowerOrPowerDown
	Inherits: ^AutoTargetGround
	Buildable:
		Queue: Defense
		BuildPaletteOrder: 80
		Prerequisites: hq, ~structures.zocom, ~disabled
		Description: Advanced base defense that emits devastating sonic shockwaves.\n  Requires power to operate.\n  Can detect cloaked units.\n  Strong vs Vehicles, Infantry\n  Weak vs Aircraft
	Valued:
		Cost: 1350
	Tooltip:
		Name: Sonic Tower
	Building:
	Health:
		HP: 55000
	RevealsShroud:
		MinRange: 6c0
		Range: 8c0
		RevealGeneratedShroud: False
	RevealsShroud@GAPGEN:
		Range: 6c0
	WithBuildingBib:
		Sequence: bibFtur4
		HasMinibib: true
	Turreted:
		TurnSpeed: 20
		InitialFacing: 48
	-WithSpriteBody:
	WithEmbeddedTurretSpriteBody:
		PauseOnCondition: disabled || empdisable || being-warped
	Armament:
		Weapon: SonicPulse
		PauseOnCondition: empdisable && being-warped
	AttackTurreted:
		RequiresCondition: !build-incomplete
		PauseOnCondition: disabled || empdisable || being-warped
	WithMuzzleOverlay:
	Power:
		Amount: -80
		RequiresCondition: !being-warped
	BodyOrientation:
		UseClassicFacings: False
	DetectCloaked:
		Range: 6c0
		RequiresCondition: !(disabled || empdisable || being-warped)
